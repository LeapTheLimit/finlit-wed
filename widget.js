/*! For license information please see widget.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FinlitWidget=t():e.FinlitWidget=t()}(self,(()=>(()=>{"use strict";var e={626:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(601),a=n.n(r),s=n(314),o=n.n(s)()(a());o.push([e.id,".App {\n  text-align: center;\n}\n\n.App-logo {\n  height: 40vmin;\n  pointer-events: none;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .App-logo {\n    animation: App-logo-spin infinite 20s linear;\n  }\n}\n\n.App-header {\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: white;\n}\n\n.App-link {\n  color: #61dafb;\n}\n\n@keyframes App-logo-spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* custom */\n.voiceInputBorder {\n  border-width: 0px, 0px, 0px, 0px;\n\n  border-style: solid;\n\n  border-image-source: linear-gradient(\n    180deg,\n    #9aed66 0%,\n    #e9e9eb 50%,\n    #bcd8fa 75%,\n    #c736d9 100%\n  );\n}\n\n@keyframes scaleUp {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(1.2); /* Adjust scale factor as needed */\n  }\n}\n\n@keyframes scaleDown {\n  0% {\n    transform: scale(1.2); /* Adjust scale factor as needed */\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n.animate-scale-up {\n  animation: scaleUp 1s forwards; /* Adjust duration as needed */\n}\n\n.animate-scale-down {\n  animation: scaleDown 1s forwards; /* Adjust duration as needed */\n}\n\n@media (max-width: 700px) {\n  .maxWidthCustom {\n    overflow-y: auto;\n  }\n}\n/* @media (min-width: 769px) and (max-height: 840px) {\n  .popup-container {\n      display: none!important;\n  }\n} */\n.scrollbar-hide {\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n}\n.scrollbar-hide::-webkit-scrollbar {\n  display: none; /* Chrome, Safari and Opera */\n}\n/* @keyframes heartbeat {\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.3);\n  }\n}\n\n.animate-heartbeat {\n  animation: heartbeat 1s infinite!important;\n  transform: scale(.8);\n} */\n.shape-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 16px;\n  position: relative;\n  width: 100%;\n  height: 240px;\n}\n\n.shape {\n  position: absolute;\n}\n\n.purple-circle {\n  background-color: #c736d9;\n  width: 103.2px;\n  height: 107.2px;\n  left: calc(50% - 84px);\n  top: calc(50% - 80px);\n}\n\n.blue-circle {\n  background-color: #bcd8fa;\n  width: 54.4px;\n  height: 54.4px;\n  left: calc(50% + 32px);\n  top: calc(50% - 64px);\n}\n\n.green-circle {\n  background-color: #9aed66;\n  width: 72px;\n  height: 68.8px;\n  left: calc(50% + 16px);\n  top: calc(50% + 8px);\n}\n\n.gray-circle {\n  background-color: #d9d9d9;\n  width: 48.8px;\n  height: 46.4px;\n  left: calc(50% - 48px);\n  top: calc(64% + 40px);\n}\n\n.circle {\n  border-radius: 50%;\n  position: absolute;\n  animation: breathe 3s infinite;\n}\n\n.circle-listening {\n  animation: heartbeat 1s infinite;\n}\n\n.breathing {\n  animation: breathe 3s infinite;\n}\n\n.heartbeat {\n  animation: heartbeat 1s infinite;\n}\n\n@keyframes breathe {\n  0% {\n      transform: scale(1);\n  }\n  50% {\n      transform: scale(1.05);\n  }\n  100% {\n      transform: scale(1);\n  }\n}\n\n@keyframes heartbeat {\n  0% {\n      transform: scale(1);\n  }\n  25% {\n      transform: scale(1.1);\n  }\n  50% {\n      transform: scale(1);\n  }\n  75% {\n      transform: scale(1.1);\n  }\n  100% {\n      transform: scale(1);\n  }\n}\n\n",""]);const c=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(o[l]=!0)}for(var i=0;i<e.length;i++){var u=[].concat(e[i]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},601:e=>{e.exports=function(e){return e[1]}},287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,y={};function x(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=x.prototype;var v=b.prototype=new g;v.constructor=b,h(v,x.prototype),v.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,s={},o=null,c=null;if(null!=t)for(a in void 0!==t.ref&&(c=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var i=Array(l),u=0;u<l;u++)i[u]=arguments[u+2];s.children=i}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:n,type:e,key:o,ref:c,props:s,_owner:S.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function _(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function $(e,t,a,s,o){var c=typeof e;"undefined"!==c&&"boolean"!==c||(e=null);var l=!1;if(null===e)l=!0;else switch(c){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+_(l,0):s,w(o)?(a="",null!=e&&(a=e.replace(j,"$&/")+"/"),$(o,t,a,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(j,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var i=0;i<e.length;i++){var u=s+_(c=e[i],i);l+=$(c,t,a,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),i=0;!(c=e.next()).done;)l+=$(c=c.value,t,a,u=s+_(c,i++),o);else if("object"===c)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],a=0;return $(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},M={transition:null},I={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=O,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),s=e.key,o=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,c=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(i in t)E.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}var i=arguments.length-2;if(1===i)a.children=r;else if(1<i){l=Array(i);for(var u=0;u<i;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:a,_owner:c}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:i,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},540:(e,t,n)=>{e.exports=n(287)},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],c=0;c<e.length;c++){var l=e[c],i=r.base?l[0]+r.base:l[0],u=s[i]||0,m="".concat(i," ").concat(u);s[i]=u+1;var d=n(m),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=a(f,r);r.byIndex=c,t.splice(c,0,{identifier:m,updater:p,references:1})}o.push(m)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var c=n(s[o]);t[c].references--}for(var l=r(e,a),i=0;i<s.length;i++){var u=n(s[i]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.nc=void 0;var r={};n.r(r),n.d(r,{default:()=>re});var a=n(540);const s=n.p+"ac15180422b613275ca6853eb504839a.svg",o=()=>a.createElement("div",{className:"text-gray-500 text-xs cursor-pointer",onClick:()=>{window.open("https://leapthelimit.com/","_blank")}},"Powered by LeapTheLimit"),c=n.p+"8562c214b741e5bde7af390722764cda.svg",l=()=>a.createElement("div",null,a.createElement("img",{src:c,alt:"logo"})),i=function(){return React.createElement("div",{className:"w-full flex justify-between items-center mb-12 flex-col gap-2"},React.createElement(l,null),React.createElement(o,null))},u=e=>{let{setCurrentView:t}=e;return a.createElement("div",{className:"flex-1 flex flex-col items-center justify-between px-2 py-3 gap-2 min-h-full overflow-y-auto"},a.createElement(i,null),a.createElement("div",{className:"flex-1 flex flex-col items-center justify-evenly gap-5 md:justify-center md:my-5 h-[30%]"},a.createElement("div",{className:"md:my-2 flex flex-col gap-2 items-center"},a.createElement("p",{className:"text-white text-sm pb-4 text-center"},"Your AI Finance Buddy"),a.createElement("img",{src:s,alt:"loading",className:"sm:h-[100px] md:h-40 w-auto"})),a.createElement("h1",{className:"text-3xl md:text-2xl font-medium text-center my-5 w-[90%] flex items-center"},"Hey there! I'm Finlix!")),a.createElement("button",{className:"bg-white text-black px-4 py-3 rounded-xl text-base font-medium w-[90%]",onClick:()=>t("home")},"Get Started"))},m=n.p+"cc6bbaec2dbe3cac78dcaca5160d0a7a.svg",d=n.p+"9852bbd49db43ab5ba6c39258c8e5f42.svg",f=n.p+"64a20cb10b927a4036c3baaed638c130.svg",p=e=>{let{setCurrentView:t}=e;return a.createElement("div",{className:"flex gap-2 mb-8"},a.createElement("button",{className:"bg-[#C736D9] text-black w-[40%] p-3 rounded-2xl flex flex-col items-start justify-between",onClick:()=>t("voice")},a.createElement("img",{src:m,alt:"Mic Icon"}),a.createElement("span",{className:"text-xl font-large"},"Talk")),a.createElement("div",{className:"flex-1 w-[60%] gap-2 flex flex-col"},a.createElement("button",{className:"bg-[#BCD8FA] text-black ps-3 py-2 rounded-2xl flex flex-col gap-1.5 items-start justify-between",onClick:()=>t("text")},a.createElement("img",{src:d,alt:"Chat Icon"}),a.createElement("span",{className:"text-xs font-medium"},"Chat")),a.createElement("button",{className:"bg-[#9AED66] text-black ps-3 py-2 rounded-2xl flex flex-col gap-1.5 items-start justify-between",onClick:()=>t("comingSoon")},a.createElement("img",{src:f,alt:"Game Icon"}),a.createElement("span",{className:"text-xs font-medium"},"Play a game"),a.createElement("span",{className:"text-xs font-medium text-gray-400"},"Coming Soon"),"  ")))},h=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&n.indexOf(e)===t)).join(" ");var y={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x=(0,a.forwardRef)((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:c,...l},i)=>(0,a.createElement)("svg",{ref:i,...y,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:h("lucide",s),...l},[...c.map((([e,t])=>(0,a.createElement)(e,t))),...Array.isArray(o)?o:[o]]))),g=(e,t)=>{const n=(0,a.forwardRef)((({className:n,...r},s)=>{return(0,a.createElement)(x,{ref:s,iconNode:t,className:h(`lucide-${o=e,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var o}));return n.displayName=`${e}`,n},b=g("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),v=g("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),w=function(e){let{setCurrentView:t,path:n=null,isHistory:r=!1}=e;return a.createElement("div",{className:"flex justify-between items-center mb-6"},a.createElement("button",{onClick:()=>t(n||"home")},a.createElement(b,{size:24})),!r&&a.createElement(a.Fragment,null,a.createElement(l,null),a.createElement(v,{size:24,onClick:()=>t("history_list")})))},E=e=>{switch(e){case"voice":default:return a.createElement("img",{src:m,alt:"Mic Icon"});case"chat":return a.createElement("img",{src:d,alt:"Chat Icon"});case"game":return a.createElement("img",{src:f,alt:"Game Icon"})}};function S(e){let{setCurrentView:t}=e;const[n,r]=(0,a.useState)([]),s=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=new AbortController;try{const e=await fetch("https://leapthelimit-1057493174729.me-west1.run.app/chat-history",{signal:t.signal});if(!e.ok)throw new Error("Failed to fetch chat history");const n=await e.json(),{history:a}=n;Array.isArray(a)?r(a):console.error("Unexpected data format:",n)}catch(t){"AbortError"===t.name?console.error("Request aborted: ",t):"Failed to fetch"===t.message?e<3?(console.log(`Retrying... (${e+1}/3)`),setTimeout((()=>s(e+1)),1e3)):console.error("Error fetching chat history after multiple attempts:",t):console.error("Error fetching chat history:",t)}}),[]);(0,a.useEffect)((()=>{s()}),[s]);const o=()=>{t("history_list")};return a.createElement("div",null,a.createElement("div",{className:"flex justify-between items-center mb-4"},a.createElement("h2",{className:"text-white text-md font-medium"},"History"),a.createElement("button",{onClick:o,className:"text-gray-400 text-sm"},"See all")),a.createElement("div",{className:"space-y-2"},n.slice(0,2).map(((e,t)=>a.createElement("div",{key:t,className:"bg-zinc-800 p-3 rounded-lg flex items-center justify-start space-x-3 cursor-pointer",onClick:o},E("chat"),a.createElement("span",{className:"text-gray-300 text-xs"},e.message?e.message.substring(0,50):"Message not available","..."))))))}const k=e=>{let{setCurrentView:t}=e;return a.createElement("div",{className:"flex-1 flex flex-col h-full justify-between"},a.createElement(w,{setCurrentView:t,path:"welcome"}),a.createElement("div",{className:"overflow-y-auto max-h-[90%] scrollbar-none flex flex-col h-full justify-between"},a.createElement("h2",{className:"text-4xl md:text-3xl font-medium mb-4"},"How may I help you today!"),a.createElement(p,{setCurrentView:t}),a.createElement(S,{setCurrentView:t})),a.createElement("div",{className:"text-center mt-10"},a.createElement(o,null)))},N=g("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),C=g("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),j=e=>{let{onSelectPrompt:t}=e;const n=["What is a savings account?","How can I save money?","What is a budget?","What are the best financial practices?","How do I plan for retirement?","Explain compound interest.","How can I invest in stocks?","Tell me more about cryptocurrencies.","What is financial freedom?","How do I create a personal budget?"].sort((()=>.5-Math.random())).slice(0,3);return a.createElement("div",{className:"space-y-2"},n.map(((e,n)=>a.createElement("button",{key:n,onClick:()=>t(e),className:"bg-[#C736D9] text-white px-2 py-2 rounded-lg w-full text-sm"},e))))},_=function(){return a.createElement("div",{className:"disclaimer outline-none p-6 text-[#828282] text-xs flex-1"},a.createElement("p",null,"Finlix may make mistakes. Check info."))},$=e=>{let{pastConversation:t=[],setCurrentView:n,isHistory:r=!1}=e;const[c,l]=(0,a.useState)(t||[]),[i,u]=(0,a.useState)(""),[m,d]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!t.length),[h,y]=(0,a.useState)("en"),x=(0,a.useRef)(null),g="https://leapthelimit-1057493174729.me-west1.run.app";(0,a.useEffect)((()=>{c?.length>0&&x.current?.scrollIntoView({behavior:"smooth"})}),[c]);const b=()=>{switch(h){case"ar":return"ar";case"he":return"he";default:return"en"}},v=async()=>{if(i.trim()){const e={text:i,sender:"user"};l([...c,e]),u(""),p(!1);try{const t={message:i,language:b()};console.log("Sending payload to /chat endpoint:",t);const n=await fetch(`${g}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to send message: ${n.status} ${n.statusText}`);const r={text:(await n.json()).response,sender:"Finlix"};l((e=>[...e,r])),await w(e),await w(r)}catch(e){console.error("Failed to send message:",e)}}},w=async e=>{if(e&&e.text&&e.sender)try{const t={message:e.text,category:"user"===e.sender?"user":"bot"};console.log("Saving message:",t);const n=await fetch(`${g}/save-chat-message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to save message: ${n.status} ${n.statusText}`)}catch(e){console.error("Error saving chat message:",e)}else console.error("Invalid message object:",e)};return a.createElement("div",{className:"flex flex-col h-full bg-black text-white items-center"},a.createElement(o,null),a.createElement("div",{className:"overflow-y-auto scrollbar-none w-full h-[450px] md:h-[450px]"},f&&a.createElement("div",{className:"p-9"},a.createElement(j,{onSelectPrompt:e=>{u(e),p(!1)}})),a.createElement("div",{className:"space-y-2 overflow-y-auto scrollbar-none h-[450px] md:h-[450px] relative z-[10]"},c.map(((e,t)=>a.createElement("div",{key:t,className:"flex "+("user"===e.sender?"justify-end":"justify-start")},"Finlix"===e.sender&&a.createElement("div",{className:"w-10 me-2"},a.createElement("img",{src:s,alt:"startIcon"})),a.createElement("div",{className:"rounded-lg px-3 py-2 max-w-[75%] font-medium "+("user"===e.sender?"bg-[#C736D9] text-white rounded-br-none":"bg-[#E9E9EB] text-black my-1 rounded-bl-none")},a.createElement("p",{className:"text-xs"},e.text))))),a.createElement("div",{ref:x,className:"h-[50px]"}))),a.createElement("div",{className:"relative w-full flex items-center bg-white rounded-xl p-1 mx-4 mb-4 md:mb-0 md:max-w-[350px]"},a.createElement("div",{className:"flex-1 flex items-center"},a.createElement("button",{className:"p-2",onClick:()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Speech recognition is not supported in your browser.");const t=new e;t.lang="ar"===h?"ar-SA":"he"===h?"he-IL":"en-US",t.interimResults=!1,t.onresult=e=>{const t=e.results[0][0].transcript;u(t)},t.onerror=e=>{console.error(`Speech recognition error: ${e.error}`),alert("An error occurred with speech recognition: "+e.error)},t.onend=()=>{d(!1)},t.start(),d(!0)}},m?a.createElement(N,{color:"#C736D9"}):a.createElement(N,{color:"#828282"})),a.createElement("input",{type:"text",value:i,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"===e.key&&v()},placeholder:"Message...",className:"bg-transparent outline-none p-1 text-[#828282] text-xs flex-1"})),i.trim()&&a.createElement("button",{className:"bg-black rounded-full p-1",onClick:v},a.createElement(C,null))),a.createElement(_,null))},A=e=>{let{messages:t,setCurrentView:n}=e;return a.createElement("div",{className:"flex-1 flex flex-col"},a.createElement(w,{setCurrentView:n}),a.createElement($,{messages:t}))},T=n.p+"044c5aec5ea62977acb394b98fa3bbf9.svg",R=n.p+"0a7e1bfe83eb8fcad1b4ab33ff35a996.svg",M=e=>{let{isOpen:t,children:n}=e;return t?React.createElement("div",{className:"md:top-[4rem] fixed w-full md:w-auto inset-0 flex md:items-end justify-end pe-4 md:pe-0 md:justify-end right-4 bottom-[130px] md:bottom-[170px]"},React.createElement("div",{className:"bg-black w-[100%] max-w-[320px] md:max-w-[300px] h-[100%] md:mb-0 mt-[10px] md:max-h-[650px] rounded-2xl overflow-y-auto scrollbar-none shadow-l flex flex-col"},React.createElement("div",{className:"flex-1  p-4"},n))):null},I=e=>{let{setCurrentView:t,setPastConversation:n}=e;const[r,s]=(0,a.useState)([]),[o,c]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("https://leapthelimit-1057493174729.me-west1.run.app/chat-history");if(!e.ok)throw new Error("Failed to fetch chat history");const t=await e.json(),{history:n}=t;if(Array.isArray(n)){console.log("Raw history data:",n);const e=n.filter((e=>e.category&&e.message));console.log("Filtered valid history data:",e);const t=(e=>{const t={};return e.forEach((e=>{const n=(e=>{const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:00`})(e.timestamp);t[n]||(t[n]=[]),t[n].push(e)})),Object.entries(t).map((e=>{let[t,n]=e;return{time:t,messages:n}}))})(e);console.log("Grouped Conversations:",t);const r=t.map((e=>({type:"chat",text:e.messages[0]?.message||"Conversation summary not available",conversation:e.messages})));c(t),s(r)}else console.error("Unexpected data format:",t)}catch(e){console.error("Error fetching chat history:",e)}})()}),[]),a.createElement("div",null,a.createElement(w,{setCurrentView:t,isHistory:!0}),a.createElement("div",{className:"flex justify-between items-center mb-4"},a.createElement("h2",{className:"text-white text-xl font-medium"},"Messages History")),a.createElement("div",{className:"space-y-2 overflow-y-auto max-h-[630px] mb-12 scrollbar-none"},r.length>0?r.map(((e,r)=>a.createElement("button",{key:r,className:"bg-[#272727] p-3 rounded-2xl flex items-center justify-start space-x-3 w-full",onClick:()=>(e=>{const r=o[e];r&&(console.log("Selected conversation:",r),n(r.messages.map((e=>({text:e.message||"No content available",sender:"user"===e.category?"user":"Finlix"})))),t("past_conversation"))})(r)},E(e.type),a.createElement("span",{className:"text-gray-300 text-xs"},e.text)))):a.createElement("p",{className:"text-gray-400 text-xs"},"No history available.")))},O=g("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),V=g("AudioLines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]]),P=g("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var F=n(72),L=n.n(F),z=n(825),D=n.n(z),H=n(659),U=n.n(H),q=n(56),W=n.n(q),B=n(159),J=n.n(B),G=n(113),K=n.n(G),Y=n(626),Z={};Z.styleTagTransform=K(),Z.setAttributes=W(),Z.insert=U().bind(null,"head"),Z.domAPI=D(),Z.insertStyleElement=J(),L()(Y.A,Z),Y.A&&Y.A.locals&&Y.A.locals;const Q=e=>{let{isListening:t=!1}=e;const[n,r]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{r(!!t)}),[t]),a.createElement(a.Fragment,null,a.createElement("div",{className:"shape-container"},a.createElement("div",{className:"shape"},a.createElement("div",{className:"circle purple-circle "+(n?"circle-listening":""),"aria-hidden":"true"})),a.createElement("div",{className:"shape"},a.createElement("div",{className:"circle blue-circle "+(n?"circle-listening":""),"aria-hidden":"true"})),a.createElement("div",{className:"shape"},a.createElement("div",{className:"circle green-circle "+(n?"circle-listening":""),"aria-hidden":"true"})),a.createElement("div",{className:"shape"},a.createElement("div",{className:"circle gray-circle "+(n?"circle-listening":""),"aria-hidden":"true"}))))},X=n.p+"cf0e90a4f080ecaf1bc910140b0576bd.svg",ee=e=>{let{setCurrentView:t}=e;const[n,r]=(0,a.useState)(!1),[s,o]=(0,a.useState)(""),[c,l]=(0,a.useState)(!1),[i,u]=(0,a.useState)("EN"),[m,d]=(0,a.useState)(""),[f,p]=(0,a.useState)([]),[h,y]=(0,a.useState)(0),[x,g]=(0,a.useState)(!1),b=(0,a.useRef)(null),v=(0,a.useRef)(null),E="https://leapthelimit-1057493174729.me-west1.run.app";(0,a.useEffect)((()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){const t=new e;t.continuous=!1,t.interimResults=!1,t.lang="EN"===i?"en-US":"عر"===i?"ar-SA":"he-IL",t.onstart=()=>{v.current&&(v.current.pause(),v.current=null),r(!0),d("Listening..."),document.querySelectorAll(".circle").forEach((e=>{e.classList.add("circle-listening")}))},t.onerror=e=>{console.error("Speech recognition error",e),d("Error occurred while listening."),document.querySelectorAll(".circle").forEach((e=>{e.classList.remove("circle-listening")})),r(!1)},t.onend=()=>{d("Generating..."),document.querySelectorAll(".circle").forEach((e=>{e.classList.remove("circle-listening")})),r(!1)},t.onresult=async e=>{const t=e.results[0][0].transcript;o(t),d(""),await k(t)},b.current=t}else alert("Speech recognition is not supported in this browser. Please use Google Chrome.");return()=>{b.current&&b.current.abort(),v.current&&(v.current.pause(),v.current=null)}}),[i]);const S=()=>{switch(i){case"EN":default:return"en";case"عر":return"ar";case"עב":return"he"}},k=async e=>{try{await C({text:e,sender:"user"});const t=await fetch(`${E}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,language:S()})}),n=(await t.json()).response;await C({text:n,sender:"bot"});const r=await fetch(`${E}/synthesize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n,language_code:S()})}),a=(await r.json()).audioContent;p(n.split(" ")),y(0),g(!0),v.current&&v.current.pause(),v.current=new Audio(`data:audio/mp3;base64,${a}`),v.current.play(),v.current.onended=()=>{g(!1)}}catch(e){console.error("Error handling user message:",e),d("Error occurred while processing your message.")}},C=async e=>{if(e&&e.text&&e.sender)try{const t={message:e.text,category:"user"===e.sender?"user":"bot"};console.log("Saving message:",t);const n=await fetch(`${E}/save-chat-message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to save message: ${n.status} ${n.statusText}`)}catch(e){console.error("Error saving chat message:",e)}else console.error("Invalid message object:",e)};return(0,a.useEffect)((()=>{if(f.length>0&&h<f.length){const e=setTimeout((()=>{const e=f.slice(h,h+5).join(" ");d(e),y((e=>e+5)),h+5>=f.length&&setTimeout((()=>{d("")}),2e3)}),2e3);return()=>clearTimeout(e)}}),[h,f]),a.createElement(a.Fragment,null,a.createElement(w,{setCurrentView:t}),a.createElement("div",{className:"bg-black h-full w-full flex flex-col items-center justify-start text-white relative overflow-hidden"},a.createElement("div",{className:"h-[50%] w-full flex justify-center items-center"},a.createElement(Q,{isListening:n||x})),a.createElement("div",{className:"h-[40%] flex items-center justify-center"},a.createElement("p",{className:"text-2xl font-medium mb-4 px-4 text-center"},m.split(" ").map(((e,t)=>a.createElement("span",{key:t,className:"text-white"},e," "))))),a.createElement("div",{className:"absolute bottom-14 left-0 right-0 flex justify-between items-center px-4"},a.createElement("div",{className:"flex space-x-4"},a.createElement("button",{className:"p-2 rounded-full bg-[#272626]"},a.createElement(O,null))),a.createElement("button",{onClick:()=>{b.current&&(b.current.start(),d("Listening..."))},className:"p-4 rounded-full",style:{background:`url(${X})`,backgroundSize:"cover"}},n?a.createElement(V,{size:30}):a.createElement(N,{size:30})),a.createElement("div",{className:"relative"},a.createElement("button",{onClick:()=>{l(!c)},className:"p-2 rounded-full bg-[#272626]"},a.createElement(P,{size:24})),c&&a.createElement("div",{className:"absolute bottom-full right-1 mb-2 flex flex-col space-y-2"},["עב","عر","EN"].map((e=>a.createElement("button",{key:e,onClick:()=>u(e),className:"p-2 rounded-full text-xs flex items-center justify-center "+(i===e?"bg-purple-600":"bg-[#272626]")},e))))))))},te=e=>{let{pastConversation:t=[],setCurrentView:n,isHistory:r=!1}=e;const c=(0,a.useRef)(null),[l,i]=(0,a.useState)(""),[u,m]=(0,a.useState)(t||[]),[d,f]=(0,a.useState)(!1),[p,h]=(0,a.useState)(!t.length),[y,x]=(0,a.useState)("en"),g="https://leapthelimit-1057493174729.me-west1.run.app";(0,a.useEffect)((()=>{u?.length>0&&c.current?.scrollIntoView({behavior:"smooth"})}),[u]);const b=()=>{switch(y){case"ar":return"ar";case"he":return"he";default:return"en"}},v=async()=>{if(l.trim()){const e={text:l,sender:"user"};m([...u,e]),i("");try{const t={message:l,language:b()};console.log("Sending payload to /chat endpoint:",t);const n=await fetch(`${g}/chat`,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to send message: ${n.status} ${n.statusText}`);const r={text:(await n.json()).response,sender:"Finlix"};m((e=>[...e,r])),await E(e),await E(r)}catch(e){console.error("Failed to send message:",e)}}},E=async e=>{if(e&&e.text&&e.sender)try{const t={message:e.text,category:"user"===e.sender?"user":"bot"};console.log("Saving message:",t);const n=await fetch(`${g}/save-chat-message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to save message: ${n.status} ${n.statusText}`)}catch(e){console.error("Error saving chat message:",e)}else console.error("Invalid message object:",e)};return a.createElement("div",{className:"flex-1 flex flex-col"},a.createElement(w,{setCurrentView:n}),a.createElement("div",{className:"flex-1 flex flex-col items-center justify-center"}),a.createElement("div",{className:"flex flex-col h-full bg-black text-white items-center"},a.createElement(o,null),a.createElement("div",{className:"overflow-y-auto scrollbar-none w-full h-[450px] md:h-[450px]"},a.createElement("div",{className:"space-y-2 overflow-y-auto scrollbar-none h-[450px] md:h-[450px] relative z-[10]"},u.map(((e,t)=>a.createElement("div",{key:t,className:"flex "+("user"===e.sender?"justify-end":"justify-start")},"Finlix"===e.sender&&a.createElement("div",{className:"w-10 me-2"},a.createElement("img",{src:s,alt:"startIcon"})),a.createElement("div",{className:"rounded-lg px-3 py-2 max-w-[75%] font-medium "+("user"===e.sender?"bg-[#C736D9] text-white rounded-br-none":"bg-[#E9E9EB] text-black my-1 rounded-bl-none")},a.createElement("p",{className:"text-xs"},e.text))))),a.createElement("div",{ref:c,className:"h-[50px]"}))),a.createElement("div",{className:"relative w-full flex items-center bg-white rounded-xl p-1 mx-4 mb-4 md:mb-0 md:max-w-[350px]"},a.createElement("div",{className:"flex-1 flex items-center"},a.createElement("button",{className:"p-2",onClick:()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void alert("Speech recognition is not supported in your browser.");const t=new e;t.lang="ar"===y?"ar-SA":"he"===y?"he-IL":"en-US",t.interimResults=!1,t.onresult=e=>{const t=e.results[0][0].transcript;i(t)},t.onerror=e=>{console.error(`Speech recognition error: ${e.error}`),alert("An error occurred with speech recognition: "+e.error)},t.onend=()=>{f(!1)},t.start(),f(!0)}},d?a.createElement(N,{color:"#C736D9"}):a.createElement(N,{color:"#828282"})),a.createElement("input",{type:"text",value:l,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"===e.key&&v()},placeholder:"Message...",className:"bg-transparent outline-none p-1 text-[#828282] text-xs flex-1"})),l.trim()&&a.createElement("button",{className:"bg-black rounded-full p-1",onClick:v},a.createElement(C,null))),a.createElement(_,null)))},ne=e=>{let{setCurrentView:t}=e;return a.createElement("div",{className:"flex flex-col h-full justify-between bg-black text-white"},a.createElement("div",{className:"flex-1 flex flex-col"},a.createElement(w,{setCurrentView:t}),a.createElement("div",{className:"flex-1 flex flex-col items-center justify-center"}),a.createElement("div",{className:"flex flex-col items-center justify-center flex-grow"},a.createElement("h1",{className:"text-3xl font-bold"},"Coming Soon"),a.createElement("p",{className:"text-gray-400 mt-2"},"This feature is currently under development."))))},re=()=>{const[e,t]=(0,a.useState)("welcome"),[n,r]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[c,l]=(0,a.useState)(""),[i,m]=(0,a.useState)(!1);return a.createElement("div",{className:"min-h-screen text-white flex flex-col items-center justify-center"},a.createElement("button",{onClick:()=>{m(!i),t("welcome")},className:"fixed md:abso bottom-[50px] z-20 md:bottom-[100px] md:right-2 right-4 md:left-auto"},a.createElement("img",{src:i?T:R,alt:"show-close",className:"w-16"})),a.createElement(M,{isOpen:i,onClose:()=>m(!1)},(()=>{switch(e){case"welcome":return a.createElement(u,{setCurrentView:t});case"home":return a.createElement(k,{setCurrentView:t});case"voice":return a.createElement(ee,{setCurrentView:t});case"text":return a.createElement(A,{messages:n,inputText:c,setInputText:l,setCurrentView:t});case"history_list":return a.createElement(I,{setCurrentView:t,setPastConversation:o});case"chat":return a.createElement($,{pastConversation:s,setCurrentView:t});case"past_conversation":return a.createElement(te,{pastConversation:s,setCurrentView:t});case"comingSoon":return a.createElement(ne,{setCurrentView:t});default:return null}})()))};return r})()));